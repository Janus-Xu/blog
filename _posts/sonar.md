---
title: 代码质量检测工具 — Sonar
date: 2018-01-20 15:12:43
tags:
- 工具
categories:
- 工具
---

2017 年底，公司引入了代码质量检测工具，通过 [ Jenkins](https://jenkins.io/) 与 [Sonar](https://www.sonarqube.org/) 集成，实现对代码的持续检测，并生成代码质量报告。我们也将提高代码质量列入了 Q1 的 OKR 中，这使得我们在编码时必须重视编码规范了。
![](https://img.fanhaobai.com/2018/01/sonar/9ced3e4b-555f-4b6a-957c-0df28317cb51.png)<!--more-->

![代码质量检测报告](https://img.fanhaobai.com/2018/01/sonar/32589554-56bd-498f-8f33-39aa7a8bf590.png)

## 为什么需要Sonar

一段代码程序最基本要求是具有正确性、可靠性。那什么样的代码才算得上是较好代码，我觉得较好的代码应该具有：

* 可读性；
* 扩展性；
* 可复用性；
* 兼容性；
* 安全性；

其中可读性最为重要，因为机器总能读懂写的代码，但其他人就不一定能读懂自己写的代码，更不能谈可扩展、可复用、安全性的了。

代码的正确性、可靠性这两个指标都可以通过软件测试手段来保证，但是并不能通过软件测试来检验代码的可读性。为了保证代码的可读性，团队一般都会指定相应的编码规范，这样每个人编写的代码看起来是出自一人之手，可读性高，易于维护和扩展。事实上，尽管存在编码规范和代码 review，我们难免会在编码时随心所欲一下，或者历史遗留问题，导致项目编码混乱，所以想通过人来完成代码规范还是比较困难。

这时我们就需要一个工具，它能够按照我们制定的编码规范，量化项目编码的质量，自动持续地跟踪代码质量变化趋势，以使得项目代码逐渐符合我们制定的编码规范，提高代码的可读性。

我们选用了 [Sonar](https://github.com/SonarSource/sonarqube)  作为代码质量检测工具，Sonar 是一个 Java 开发的开源代码质量检测工具，支持大多数编程语言，如 Java、JavaScript、C/C++、PHP、Python 等，大约已经有 85,000 个公司或组织使用。

## 检测规则

o((⊙﹏⊙))

## 部署

Sonar 的部署，见 [使用 Jenkins 与 Sonar 集成对代码进行持续检测](https://www.ibm.com/developerworks/cn/devops/1612_qusm_jenkins/index.html)。


## 效果


## 总结